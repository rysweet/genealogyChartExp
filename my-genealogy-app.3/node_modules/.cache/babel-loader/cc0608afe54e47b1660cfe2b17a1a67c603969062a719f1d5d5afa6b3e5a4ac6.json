{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/genealogyChartExp/my-genealogy-app/src/components/GenealogyChart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport PersonEditForm from \"./PersonEditForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RING_WIDTH = 100; // radial width per generation\nconst ARC_PADDING = 0; // small gap (in degrees) between arcs, if desired\nconst CENTER_RADIUS = 30; // radius for the center circle\n\nexport default function GenealogyChart({\n  people,\n  maxGenerations,\n  centerPersonId,\n  onUpdatePeople\n}) {\n  _s();\n  const [selectedPersonId, setSelectedPersonId] = useState(null);\n  const svgRef = useRef(null);\n  useEffect(() => {\n    if (!people || people.length === 0) return;\n    drawChart();\n  }, [people, maxGenerations]);\n  function drawChart() {\n    const width = 800;\n    const height = 800;\n    const centerX = width / 2;\n    const centerY = height / 2;\n\n    // Clear the existing SVG\n    d3.select(svgRef.current).selectAll(\"*\").remove();\n\n    // Create base SVG\n    const svg = d3.select(svgRef.current).attr(\"width\", width).attr(\"height\", height);\n\n    // Map of id -> person object for quick lookup\n    const peopleMap = new Map(people.map(p => [p.id, p]));\n\n    // Build BFS arrays of ancestors up to `maxGenerations - 1`\n    // ancestors[i] = array of length 2^i (for i >= 1).\n    // ancestors[0] = [centerId]\n    const ancestors = [];\n    for (let i = 0; i < maxGenerations; i++) {\n      ancestors[i] = new Array(2 ** i).fill(null);\n    }\n    // Generation 0: just the center person\n    ancestors[0][0] = centerPersonId;\n\n    // Fill subsequent generations\n    for (let i = 0; i < maxGenerations - 1; i++) {\n      const size = 2 ** i; // number in this generation\n      for (let j = 0; j < size; j++) {\n        const personId = ancestors[i][j];\n        if (!personId) continue; // skip if empty slot\n        const person = peopleMap.get(personId);\n        if (!person) continue;\n\n        // father => next gen slot [2*j], mother => next gen slot [2*j + 1]\n        if (person.parents && person.parents.length > 0) {\n          ancestors[i + 1][2 * j] = person.parents[0] || null; // father\n        }\n        if (person.parents && person.parents.length > 1) {\n          ancestors[i + 1][2 * j + 1] = person.parents[1] || null; // mother\n        }\n      }\n    }\n\n    // 1) Draw the center as a circle\n    const centerPerson = peopleMap.get(centerPersonId);\n    svg.append(\"circle\").attr(\"cx\", centerX).attr(\"cy\", centerY).attr(\"r\", CENTER_RADIUS).attr(\"fill\", \"#F6C\").attr(\"stroke\", \"#333\").on(\"click\", () => {\n      setSelectedPersonId(centerPersonId);\n    });\n\n    // Label the center\n    svg.append(\"text\").attr(\"x\", centerX).attr(\"y\", centerY + 4) // slight offset\n    .attr(\"text-anchor\", \"middle\").style(\"font-size\", \"14px\").text(centerPerson ? `${centerPerson.firstName} ${centerPerson.lastName}` : \"Unknown\");\n\n    // 2) For each generation i (1..maxGenerations-1), draw arcs\n    for (let i = 1; i < maxGenerations; i++) {\n      const genArray = ancestors[i]; // up to 2^i individuals\n      const n = 2 ** i; // number of arc segments\n      const arcAngle = 2 * Math.PI / n - ARC_PADDING * Math.PI / 180;\n\n      // define ring radii\n      const innerRadius = (i - 1) * RING_WIDTH + CENTER_RADIUS + 10;\n      const outerRadius = i * RING_WIDTH + CENTER_RADIUS;\n      for (let k = 0; k < n; k++) {\n        const personId = genArray[k];\n        const startAngle = k * (2 * Math.PI / n);\n        const endAngle = startAngle + arcAngle;\n\n        // We use a D3 arc generator\n        const arcGenerator = d3.arc().innerRadius(innerRadius).outerRadius(outerRadius).startAngle(startAngle).endAngle(endAngle);\n\n        // For convenience, if there's no person, we can either skip or draw a \"blank\" arc\n        if (!personId) {\n          // Option A: skip drawing this arc\n          // continue;\n\n          // Option B: draw a blank arc\n          svg.append(\"path\").attr(\"transform\", `translate(${centerX}, ${centerY})`).attr(\"d\", arcGenerator).attr(\"fill\", \"#eee\").attr(\"stroke\", \"#ccc\");\n          // no label\n          continue;\n        }\n\n        // If person exists, draw the arc interactive\n        svg.append(\"path\").attr(\"transform\", `translate(${centerX}, ${centerY})`).attr(\"d\", arcGenerator).attr(\"fill\", \"#ddd\").attr(\"stroke\", \"#999\").on(\"click\", () => {\n          setSelectedPersonId(personId);\n        });\n\n        // Add a text path for the label\n        const textPathId = `textPath-${i}-${k}`;\n        svg.append(\"defs\").append(\"path\").attr(\"id\", textPathId).attr(\"d\", arcGenerator()).attr(\"transform\", `translate(${centerX}, ${centerY})`);\n        const person = peopleMap.get(personId);\n        let label = \"Unknown\";\n        if (person) {\n          label = `${person.firstName} ${person.lastName} (${person.birthDate} - ${person.deathDate})`;\n        }\n        svg.append(\"text\").append(\"textPath\").attr(\"xlink:href\", `#${textPathId}`).attr(\"startOffset\", \"25%\").style(\"font-size\", \"12px\").style(\"text-anchor\", \"middle\").text(label);\n      }\n    }\n  }\n\n  // Editing logic\n  const handleEditSave = updatedPerson => {\n    onUpdatePeople(prev => prev.map(p => p.id === updatedPerson.id ? updatedPerson : p));\n    setSelectedPersonId(null);\n  };\n  const handleEditCancel = () => {\n    setSelectedPersonId(null);\n  };\n  const selectedPerson = people.find(p => p.id === selectedPersonId);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), selectedPerson && /*#__PURE__*/_jsxDEV(PersonEditForm, {\n      person: selectedPerson,\n      onSave: handleEditSave,\n      onCancel: handleEditCancel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n_s(GenealogyChart, \"HkK2Qgqlq1AU8O8gVdur7h43CwU=\");\n_c = GenealogyChart;\nvar _c;\n$RefreshReg$(_c, \"GenealogyChart\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","PersonEditForm","jsxDEV","_jsxDEV","RING_WIDTH","ARC_PADDING","CENTER_RADIUS","GenealogyChart","people","maxGenerations","centerPersonId","onUpdatePeople","_s","selectedPersonId","setSelectedPersonId","svgRef","length","drawChart","width","height","centerX","centerY","select","current","selectAll","remove","svg","attr","peopleMap","Map","map","p","id","ancestors","i","Array","fill","size","j","personId","person","get","parents","centerPerson","append","on","style","text","firstName","lastName","genArray","n","arcAngle","Math","PI","innerRadius","outerRadius","k","startAngle","endAngle","arcGenerator","arc","textPathId","label","birthDate","deathDate","handleEditSave","updatedPerson","prev","handleEditCancel","selectedPerson","find","position","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","onSave","onCancel","_c","$RefreshReg$"],"sources":["/Users/ryan/genealogyChartExp/my-genealogy-app/src/components/GenealogyChart.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport PersonEditForm from \"./PersonEditForm\";\n\nconst RING_WIDTH = 100; // radial width per generation\nconst ARC_PADDING = 0;  // small gap (in degrees) between arcs, if desired\nconst CENTER_RADIUS = 30; // radius for the center circle\n\nexport default function GenealogyChart({\n  people,\n  maxGenerations,\n  centerPersonId,\n  onUpdatePeople\n}) {\n  const [selectedPersonId, setSelectedPersonId] = useState(null);\n  const svgRef = useRef(null);\n\n  useEffect(() => {\n    if (!people || people.length === 0) return;\n    drawChart();\n  }, [people, maxGenerations]);\n\n  function drawChart() {\n    const width = 800;\n    const height = 800;\n    const centerX = width / 2;\n    const centerY = height / 2;\n\n    // Clear the existing SVG\n    d3.select(svgRef.current).selectAll(\"*\").remove();\n\n    // Create base SVG\n    const svg = d3\n      .select(svgRef.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n\n    // Map of id -> person object for quick lookup\n    const peopleMap = new Map(people.map((p) => [p.id, p]));\n\n    // Build BFS arrays of ancestors up to `maxGenerations - 1`\n    // ancestors[i] = array of length 2^i (for i >= 1).\n    // ancestors[0] = [centerId]\n    const ancestors = [];\n    for (let i = 0; i < maxGenerations; i++) {\n      ancestors[i] = new Array(2 ** i).fill(null);\n    }\n    // Generation 0: just the center person\n    ancestors[0][0] = centerPersonId;\n\n    // Fill subsequent generations\n    for (let i = 0; i < maxGenerations - 1; i++) {\n      const size = 2 ** i; // number in this generation\n      for (let j = 0; j < size; j++) {\n        const personId = ancestors[i][j];\n        if (!personId) continue; // skip if empty slot\n        const person = peopleMap.get(personId);\n        if (!person) continue;\n\n        // father => next gen slot [2*j], mother => next gen slot [2*j + 1]\n        if (person.parents && person.parents.length > 0) {\n          ancestors[i + 1][2 * j] = person.parents[0] || null; // father\n        }\n        if (person.parents && person.parents.length > 1) {\n          ancestors[i + 1][2 * j + 1] = person.parents[1] || null; // mother\n        }\n      }\n    }\n\n    // 1) Draw the center as a circle\n    const centerPerson = peopleMap.get(centerPersonId);\n    svg\n      .append(\"circle\")\n      .attr(\"cx\", centerX)\n      .attr(\"cy\", centerY)\n      .attr(\"r\", CENTER_RADIUS)\n      .attr(\"fill\", \"#F6C\")\n      .attr(\"stroke\", \"#333\")\n      .on(\"click\", () => {\n        setSelectedPersonId(centerPersonId);\n      });\n\n    // Label the center\n    svg\n      .append(\"text\")\n      .attr(\"x\", centerX)\n      .attr(\"y\", centerY + 4) // slight offset\n      .attr(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"14px\")\n      .text(\n        centerPerson\n          ? `${centerPerson.firstName} ${centerPerson.lastName}`\n          : \"Unknown\"\n      );\n\n    // 2) For each generation i (1..maxGenerations-1), draw arcs\n    for (let i = 1; i < maxGenerations; i++) {\n      const genArray = ancestors[i]; // up to 2^i individuals\n      const n = 2 ** i; // number of arc segments\n      const arcAngle = (2 * Math.PI) / n - (ARC_PADDING * Math.PI) / 180;\n\n      // define ring radii\n      const innerRadius = (i - 1) * RING_WIDTH + CENTER_RADIUS + 10;\n      const outerRadius = i * RING_WIDTH + CENTER_RADIUS;\n\n      for (let k = 0; k < n; k++) {\n        const personId = genArray[k];\n        const startAngle = k * ((2 * Math.PI) / n);\n        const endAngle = startAngle + arcAngle;\n\n        // We use a D3 arc generator\n        const arcGenerator = d3\n          .arc()\n          .innerRadius(innerRadius)\n          .outerRadius(outerRadius)\n          .startAngle(startAngle)\n          .endAngle(endAngle);\n\n        // For convenience, if there's no person, we can either skip or draw a \"blank\" arc\n        if (!personId) {\n          // Option A: skip drawing this arc\n          // continue;\n\n          // Option B: draw a blank arc\n          svg\n            .append(\"path\")\n            .attr(\"transform\", `translate(${centerX}, ${centerY})`)\n            .attr(\"d\", arcGenerator)\n            .attr(\"fill\", \"#eee\")\n            .attr(\"stroke\", \"#ccc\");\n          // no label\n          continue;\n        }\n\n        // If person exists, draw the arc interactive\n        svg\n          .append(\"path\")\n          .attr(\"transform\", `translate(${centerX}, ${centerY})`)\n          .attr(\"d\", arcGenerator)\n          .attr(\"fill\", \"#ddd\")\n          .attr(\"stroke\", \"#999\")\n          .on(\"click\", () => {\n            setSelectedPersonId(personId);\n          });\n\n        // Add a text path for the label\n        const textPathId = `textPath-${i}-${k}`;\n        svg\n          .append(\"defs\")\n          .append(\"path\")\n          .attr(\"id\", textPathId)\n          .attr(\"d\", arcGenerator())\n          .attr(\"transform\", `translate(${centerX}, ${centerY})`);\n\n        const person = peopleMap.get(personId);\n        let label = \"Unknown\";\n        if (person) {\n          label = `${person.firstName} ${person.lastName} (${person.birthDate} - ${person.deathDate})`;\n        }\n\n        svg\n          .append(\"text\")\n          .append(\"textPath\")\n          .attr(\"xlink:href\", `#${textPathId}`)\n          .attr(\"startOffset\", \"25%\")\n          .style(\"font-size\", \"12px\")\n          .style(\"text-anchor\", \"middle\")\n          .text(label);\n      }\n    }\n  }\n\n  // Editing logic\n  const handleEditSave = (updatedPerson) => {\n    onUpdatePeople((prev) =>\n      prev.map((p) => (p.id === updatedPerson.id ? updatedPerson : p))\n    );\n    setSelectedPersonId(null);\n  };\n  const handleEditCancel = () => {\n    setSelectedPersonId(null);\n  };\n  const selectedPerson = people.find((p) => p.id === selectedPersonId);\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <svg ref={svgRef}></svg>\n      {selectedPerson && (\n        <PersonEditForm\n          person={selectedPerson}\n          onSave={handleEditSave}\n          onCancel={handleEditCancel}\n        />\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}